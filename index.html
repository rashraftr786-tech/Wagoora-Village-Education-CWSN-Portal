<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Adventure!</title>
    <style>
        body { font-family: 'Comic Sans MS', cursive, sans-serif; background-color: #eef9ff; text-align: center; padding: 20px; }
        
        /* Star Counter */
        .score-box { 
            position: fixed; top: 10px; right: 10px; background: #fff; 
            padding: 10px 20px; border-radius: 30px; border: 4px solid #ffc107;
            font-size: 1.5rem; font-weight: bold; z-index: 1000;
        }

        h1 { color: #ff5722; font-size: 3rem; }
        .section-title { background: #4caf50; color: white; padding: 10px 20px; border-radius: 15px; display: inline-block; margin: 20px 0; }

        .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; }

        .card { 
            background: white; border: 4px solid #2196f3; border-radius: 20px; 
            padding: 20px; width: 260px; box-shadow: 0 6px 0 #1976d2;
        }

        /* Borrow Area */
        .regroup-row { display: flex; justify-content: flex-end; gap: 12px; margin-bottom: 5px; padding-right: 25px; }
        .regroup-box { width: 35px; height: 35px; border: 2px dashed #ff9800; border-radius: 5px; text-align: center; color: #ff9800; font-size: 1.2rem; }

        .math-display { 
            font-size: 3rem; font-weight: bold; text-align: right; 
            font-family: 'Courier New', monospace; line-height: 1.2; margin-right: 20px;
        }

        .divider { border-bottom: 6px solid #333; margin: 10px 0; border-radius: 10px; }

        input[type="number"] { 
            width: 80%; font-size: 2.5rem; text-align: center; 
            border: 3px solid #ccc; border-radius: 10px; padding: 5px; margin-bottom: 10px;
        }

        .check-btn { 
            background: #ff5722; color: white; border: none; padding: 10px 25px; 
            font-size: 1.3rem; border-radius: 15px; cursor: pointer; font-weight: bold;
        }
        .check-btn:hover { background: #e64a19; }

        .msg { height: 30px; margin-top: 10px; font-weight: bold; font-size: 1.2rem; }
        .win { background-color: #dff0d8 !important; border-color: #3c763d !important; }
    </style>
</head>
<body>

    <div class="score-box">⭐ Stars: <span id="stars">0</span></div>

    <h1>Math Hero Challenge!</h1>

    <h2 class="section-title">Level 1: No Borrowing (Easy)</h2>
    <div class="container" id="L1"></div>

    <h2 class="section-title" style="background:#9c27b0">Level 2: Borrowing Power (Hard)</h2>
    <div class="container" id="L2"></div>

    <script>
        let score = 0;
        const l1Data = [[9876, 1234], [8594, 2130], [7765, 4321], [6982, 5471], [5544, 2233], [9999, 1111], [8765, 3042], [6432, 5121], [7890, 5670], [4567, 1234], [9283, 4172], [8888, 4444], [7654, 2321], [6543, 1210], [5978, 2634], [9345, 1234], [8721, 5610], [7439, 2128], [6854, 3721], [5999, 4888]];
        const l2Data = [[5231, 2845], [9000, 4567], [7123, 3456], [6412, 1823], [8245, 3756], [4321, 1982], [5555, 2777], [8010, 3456], [7421, 5634], [6111, 2888], [9342, 4567], [5005, 1236], [7234, 4567], [8111, 3222], [4210, 1567], [6325, 2748], [9102, 4356], [7000, 2999], [8432, 4567], [5221, 1888]];

        function makeProblems(list, targetId, hasBorrow) {
            const div = document.getElementById(targetId);
            list.forEach((num, i) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.id = `card-${targetId}-${i}`;
                
                let borrowHtml = hasBorrow ? `<div class="regroup-row">
                    <input type="text" class="regroup-box" maxlength="2">
                    <input type="text" class="regroup-box" maxlength="2">
                    <input type="text" class="regroup-box" maxlength="2">
                    <input type="text" class="regroup-box" maxlength="2">
                </div>` : '<div style="height:40px"></div>';

                card.innerHTML = `
                    ${borrowHtml}
                    <div class="math-display">${num[0]}<br>- ${num[1]}</div>
                    <div class="divider"></div>
                    <input type="number" id="in-${targetId}-${i}" placeholder="????">
                    <button class="check-btn" onclick="check(${num[0]}, ${num[1]}, '${targetId}', ${i})">Check!</button>
                    <div class="msg" id="msg-${targetId}-${i}"></div>
                `;
                div.appendChild(card);
            });
        }

        window.check = function(a, b, tid, i) {
            const userIn = document.getElementById(`in-${tid}-${i}`);
            const message = document.getElementById(`msg-${tid}-${i}`);
            const card = document.getElementById(`card-${tid}-${i}`);
            const correct = a - b;

            if (parseInt(userIn.value) === correct) {
                if (!card.classList.contains('win')) {
                    score++;
                    document.getElementById('stars').innerText = score;
                    card.classList.add('win');
                }
                message.innerText = "✅ Great Job!";
                message.style.color = "green";
            } else {
                message.innerText = "❌ Try again!";
                message.style.color = "red";
            }
        };

        makeProblems(l1Data, 'L1', false);
        makeProblems(l2Data, 'L2', true);
    </script>
</body>
</html>
        
